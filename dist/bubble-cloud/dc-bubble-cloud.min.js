/*!
 * dc-addons-bubble-chart v0.1.0
 *
 * 2018-07-16 08:36:43
 *
 */
// Code copied and changed from https://github.com/vlandham/gates_bubbles
!function(){"use strict";return!dc.bubbleCloud&&void(dc.bubbleCloud=function(a,b){function c(){h.elasticRadius()&&h.r().domain([h.rMin(),h.rMax()]),h.r().range([h.MIN_RADIUS,h.xAxisLength()*h.maxBubbleRelativeSize()]),l.empty()?d():e(),g(),k=d3.forceSimulation().nodes(h.data()).on("tick",function(){n.attr("transform",function(a){return"translate("+a.x+","+a.y+")"})}),k.force("x",d3.forceX().strength(i).x(o.x)).force("y",d3.forceY().strength(i).y(o.y)).force("charge",d3.forceManyBody().strength(f)).force("collide",d3.forceCollide(function(a){return h.bubbleR(a)+1})).velocityDecay(j)}function d(){n=m.selectAll("g").data(h.data()).enter().append("g").attr("class",h.BUBBLE_NODE_CLASS).on("mouseover",function(){d3.select(this).raise()}),l=n.append("circle").attr("class",h.BUBBLE_CLASS).attr("r",function(a){return a.radius=h.bubbleR(a),a.radius}).attr("fill-opacity",1).attr("fill",function(a,b){return h.getColor(a,b)}).attr("stroke-width",2).on("click",h.onClick).on("mouseenter",function(){d3.select(this).attr("stroke","#303030")}).on("mouseout",function(){d3.select(this).attr("stroke","none")}),h._doRenderLabel(n),h._doRenderTitles(n)}function e(){l.data(h.data()).attr("r",function(a){return a.radius=h.bubbleR(a),a.radius}),h.doUpdateLabels(n),h.doUpdateTitles(n)}function f(a){return-Math.pow(a.radius,2)*i}function g(){h.hasFilter()?n.each(function(a){h.hasFilter(h.keyAccessor()(a))?h.highlightSelected(this):h.fadeDeselected(this)}):n.each(function(){h.resetHighlight(this)})}var h=dc.bubbleMixin(dc.capMixin(dc.bubbleChart(a))),i=.3,j=.25,k=null,l=[],m=null,n=null,o={x:h.effectiveWidth()/2,y:h.effectiveHeight()/2};return h._doRender=function(){return h.resetSvg(),m=h.svg().append("g"),l=d3.select(),c(),h},h._doRedraw=function(){return c(),h},h.anchor(a,b)})}();